# Elbow Turning Vane Generated Noise Calculations

## Overview

This module implements calculations for predicting the sound power levels generated by elbows fitted with turning vanes, based on the ASHRAE 1991 Algorithms for HVAC Acoustics. The calculations are valid for elbow angles between 60° and 120°.

## Theory and Equations

### Main Sound Power Level Equation (4.7)

The 1/1 octave band sound power levels generated by elbows with turning vanes are given by:

```
Lw(f) = KT + 10*log10(Uc) + 50*log10(S) + 10*log10(CD) + 10*log10(n)
```

Where:
- `Lw(f)` = Sound power level at frequency f (dB re 10⁻¹² W)
- `KT` = Characteristic spectrum (dB)
- `Uc` = Flow velocity in constriction (ft/sec)
- `S` = Cross-sectional area of duct (ft²)
- `CD` = Chord length of typical vane (ft)
- `n` = Number of turning vanes

### Calculation Steps

#### Step 1: Pressure Loss Coefficient (Equation 4.8)
```
C = 15.9e6 × (ΔP / (Q/S²))
```
Where:
- `C` = Total pressure loss coefficient
- `ΔP` = Total pressure drop across blades (in. w.g.)
- `Q` = Flow rate (cfm)
- `S` = Cross-sectional area of duct (ft²)

#### Step 2: Blockage Factor (Equation 4.9)
```
BF = (√C - 1) / (C - 1)
```
Where:
- `BF` = Blockage factor

#### Step 3: Constriction Velocity (Equation 4.10)
```
Uc = 0.0167 × (Q / (BF × S))
```
Where:
- `Uc` = Flow velocity in constriction (ft/sec)
- `Q` = Flow rate (cfm)
- `BF` = Blockage factor
- `S` = Cross-sectional area of duct (ft²)

#### Step 4: Strouhal Number (Equation 4.11)
```
St = (f × CD) / Uc
```
Where:
- `St` = Strouhal number
- `f` = 1/1 octave band center frequency (Hz)
- `CD` = Chord length of typical vane (ft)
- `Uc` = Flow velocity in constriction (ft/sec)

#### Step 5: Characteristic Spectrum (Equation 4.12)
```
KT = -47.5 - 7.69[log10(St)]².³
```
Where:
- `KT` = Characteristic spectrum (dB)
- `St` = Strouhal number

## Usage

### Basic Usage

```python
from elbow_turning_vane_generated_noise_calculations import ElbowTurningVaneCalculator

# Initialize calculator
calculator = ElbowTurningVaneCalculator()

# Define parameters
flow_rate = 1000.0  # cfm
duct_area = 2.0     # ft²
duct_height = 1.0   # ft
vane_chord_length = 6.0  # inches
num_vanes = 5
total_pressure_drop = 0.5  # in. w.g.
flow_velocity = 500.0  # ft/sec

# Calculate complete spectrum
spectrum = calculator.calculate_complete_spectrum(
    flow_rate, duct_area, duct_height, vane_chord_length,
    num_vanes, total_pressure_drop, flow_velocity
)

# Create DataFrame
df = calculator.create_spectrum_dataframe(
    flow_rate, duct_area, duct_height, vane_chord_length,
    num_vanes, total_pressure_drop, flow_velocity
)

# Generate report
report = calculator.generate_report(
    flow_rate, duct_area, duct_height, vane_chord_length,
    num_vanes, total_pressure_drop, flow_velocity
)

# Create visualization
calculator.plot_spectrum(
    flow_rate, duct_area, duct_height, vane_chord_length,
    num_vanes, total_pressure_drop, flow_velocity
)
```

### Individual Calculation Methods

```python
# Calculate pressure loss coefficient
C = calculator.calculate_pressure_loss_coefficient(total_pressure_drop, flow_velocity)

# Calculate blockage factor
BF = calculator.calculate_blockage_factor(C)

# Calculate constriction velocity
Uc = calculator.calculate_constriction_velocity(flow_rate, duct_area, BF, duct_height)

# Calculate Strouhal number for a specific frequency
St = calculator.calculate_strouhal_number(frequency, vane_chord_length, Uc)

# Calculate characteristic spectrum
KT = calculator.calculate_characteristic_spectrum(St)

# Calculate sound power level
Lw = calculator.calculate_sound_power_level(frequency, Uc, duct_area, vane_chord_length, num_vanes, KT)
```

## Input Parameters

| Parameter | Units | Typical Range | Description |
|-----------|-------|---------------|-------------|
| `flow_rate` | cfm | 100-10,000 | Air flow rate through the duct |
| `duct_area` | ft² | 0.1-100 | Cross-sectional area of the duct |
| `duct_height` | ft | 0.1-10 | Duct height normal to turning vane length |
| `vane_chord_length` | inches | 1-24 | Chord length of a typical turning vane |
| `num_vanes` | - | 1-20 | Number of turning vanes in the elbow |
| `total_pressure_drop` | in. w.g. | 0.01-5.0 | Total pressure drop across the turning vanes |
| `flow_velocity` | ft/sec | 100-3,000 | Flow velocity in the duct |

## Output

The calculator provides:

1. **Sound Power Level Spectrum**: 1/1 octave band sound power levels from 63 Hz to 8,000 Hz
2. **Intermediate Calculations**: Pressure loss coefficient, blockage factor, constriction velocity
3. **Visualizations**: Spectrum plots and parameter comparisons
4. **Comprehensive Reports**: Detailed calculation summaries

## Validation

The calculator includes input validation to ensure parameters are within typical HVAC ranges:

- Flow rate: 100-10,000 cfm
- Duct area: 0.1-100 ft²
- Duct height: 0.1-10 ft
- Vane chord length: 1-24 inches
- Number of vanes: 1-20
- Pressure drop: 0.01-5.0 in. w.g.
- Flow velocity: 100-3,000 ft/sec

## Limitations

1. **Elbow Angle**: Valid only for elbow angles between 60° and 120°
2. **Installation**: Assumes proper turning vane installation
3. **Flow Conditions**: Assumes steady, fully developed flow
4. **Vane Geometry**: Assumes uniform vane geometry and spacing

## Dependencies

- pandas >= 2.0.0
- numpy >= 1.20.0
- matplotlib >= 3.5.0
- seaborn >= 0.11.0

## References

1. ASHRAE 1991 Algorithms for HVAC Acoustics
2. Chapter 4: Generated Noise - Elbows with Turning Vanes
3. Equations 4.7 through 4.12

## Example Results

For typical parameters:
- Flow rate: 1000 cfm
- Duct area: 2.0 ft²
- Duct height: 1.0 ft
- Vane chord length: 6.0 inches
- Number of vanes: 5
- Pressure drop: 0.5 in. w.g.
- Flow velocity: 500 ft/sec

The calculator produces sound power levels ranging from approximately 45-75 dB across the frequency spectrum, with peak levels typically occurring in the 500-2000 Hz range.

## Files

- `elbow_turning_vane_generated_noise_calculations.py`: Main calculation script
- `elbow_turning_vane_generated_noise_calculations.ipynb`: Jupyter notebook with examples
- `README_elbow_turning_vane_generated_noise.md`: This documentation file 